:root{
  --bg:#0f1115;--card:#171a22;--card-2:#11141b;--text:#e8ecf3;--muted:#9aa6b2;--accent:#7aa2f7;--stroke:#1f2430;
  --radius-lg:20px;--radius-md:14px;--radius-sm:10px;--shadow:0 10px 30px rgba(0,0,0,.35);
  --safe-bottom: env(safe-area-inset-bottom);
}
*{box-sizing:border-box}
html,body{height:100%;margin:0}
body{background:var(--bg);color:var(--text);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Helvetica,Arial,sans-serif}
.visually-hidden{position:absolute!important;width:1px;height:1px;margin:-1px;overflow:hidden;clip:rect(0 0 0 0);border:0;padding:0}
.app{min-height:100%;display:flex;flex-direction:column}
.container{padding:16px; padding-bottom:calc(80px + var(--safe-bottom)); max-width:1024px; margin:0 auto}
h1,h2,h3{margin:.2em 0}
.subtitle{color:var(--muted)}

/* PAGES */
.page{display:none}
.page.active{display:block}

/* CATALOG */
.catalog-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:14px}
.card{background:var(--card);border-radius:var(--radius-lg);box-shadow:var(--shadow);overflow:hidden;cursor:pointer;transition:transform .12s ease}
.card:active{transform:scale(.98)}
.cover{width:100%;aspect-ratio:3/4;display:block;background:linear-gradient(160deg,#1b2030,#0e1726)}
.title{padding:10px 12px;font-weight:700}

/* PROFILE */
.profile-header{display:flex;align-items:center;gap:14px;margin-bottom:12px}
.avatar{width:72px;height:72px;border-radius:50%;background:radial-gradient(120px 90px at 30% 30%,#2a3346,#121621)}
.profile-name{font-size:24px;font-weight:800}
.stats{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin:14px 0}
.stat{background:var(--card);border-radius:var(--radius-md);padding:12px;text-align:center}
.stat .num{font-size:22px;font-weight:800}
.row-scroll{display:flex;gap:10px;overflow:auto;padding-bottom:6px}
.fav-card{flex:0 0 120px;background:var(--card);border-radius:14px;overflow:hidden}
.fav-card img{width:100%;aspect-ratio:3/4;display:block}
.fav-card .t{padding:8px;font-size:14px}

/* DETAIL */
.detail-hero{display:grid;grid-template-columns:120px 1fr;gap:16px;align-items:center;background:var(--card);border-radius:var(--radius-lg);padding:14px;box-shadow:var(--shadow)}
.detail-hero img{width:120px;border-radius:12px;aspect-ratio:3/4;object-fit:cover}
.detail-title{font-size:26px;font-weight:800;margin-bottom:6px}
.detail-desc{color:var(--muted)}
.actions{display:flex;gap:10px;margin:14px 0}
.btn{appearance:none;border:0;border-radius:14px;padding:12px 16px;font-weight:800;cursor:pointer}
.btn.primary{background:var(--accent);color:#0b1020}
.btn.ghost{background:var(--card-2);color:var(--text);border:1px solid var(--stroke)}
.chapters{background:var(--card);border-radius:var(--radius-lg);overflow:hidden}
.ch-item{display:flex;justify-content:space-between;align-items:center;padding:12px 14px;border-top:1px solid var(--stroke)}
.ch-item:first-child{border-top:0}
.ch-item .arrow{opacity:.7}

/* READER */
.reader-topbar{position:sticky;top:0;z-index:5;display:flex;align-items:center;gap:10px;background:rgba(15,17,21,.9);backdrop-filter:blur(10px);border-bottom:1px solid var(--stroke);padding:10px;border-top-left-radius:var(--radius-lg);border-top-right-radius:var(--radius-lg)}
.reader-topbar .back{background:transparent;border:1px solid var(--stroke);color:var(--text);border-radius:10px;padding:8px 12px;cursor:pointer}
.reader-title{font-weight:800;flex:1}
.reader-mode{background:var(--card-2);border:1px solid var(--stroke);color:var(--text);border-radius:10px;padding:8px 12px;cursor:pointer}
.reader-viewport{background:var(--card);border-radius:0 0 var(--radius-lg) var(--radius-lg);box-shadow:var(--shadow);padding:10px;max-height:calc(100vh - 220px);overflow:auto}
.page-img{width:100%;max-width:900px;margin:0 auto 8px;display:block;border-radius:8px;background:#0b1020}

.reader-toolbar{position:sticky;bottom:calc(64px + var(--safe-bottom));z-index:4;display:flex;align-items:center;gap:10px;justify-content:center;padding:8px 10px}
.chip{background:var(--card-2);border:1px solid var(--stroke);color:var(--text);border-radius:12px;padding:8px 12px;font-weight:700}
.nav-btn{background:var(--accent);color:#0b1020;border:0;border-radius:10px;padding:8px 12px;font-weight:800;cursor:pointer}

/* TABS */
.tabs{position:fixed;left:0;right:0;bottom:0;background:rgba(15,17,21,.9);backdrop-filter:blur(10px);border-top:1px solid var(--stroke);padding:10px 12px calc(10px + var(--safe-bottom));}
.tabs .inner{max-width:1024px;margin:0 auto;display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.tab-btn{display:flex;flex-direction:column;align-items:center;gap:6px;padding:10px 8px;border-radius:12px;color:var(--muted);border:1px solid transparent;background:transparent;font-weight:700;cursor:pointer}
.tab-btn.active{color:var(--text);border-color:var(--stroke);background:var(--card)}
.icon{width:22px;height:22px;display:inline-block}

@media (max-width:700px){
  .detail-hero{grid-template-columns:100px 1fr}
  .catalog-grid{grid-template-columns:repeat(auto-fill,minmax(130px,1fr))}
}
